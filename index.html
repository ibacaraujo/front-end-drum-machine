<!DOCTYPE html>
<html>
<head>
  <title>Drum Machine</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
  <script src="https://unpkg.com/react@15/dist/react.js"></script>
  <script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
  <script type="text/babel">

  	const data = [
  		{ id: 'heater1', letter: 'Q', src: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3'},
  		{ id: 'heater2', letter: 'W', src: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-2.mp3'},
  		{ id: 'heater3', letter: 'E', src: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-3.mp3'},
  		{ id: 'heater4', letter: 'A', src: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-4_1.mp3'},
  		{ id: 'heater6', letter: 'S', src: 'https://s3.amazonaws.com/freecodecamp/drums/Heater-6.mp3'},
  		{ id: 'dscoh', letter: 'D', src: 'https://s3.amazonaws.com/freecodecamp/drums/Dsc_Oh.mp3'},
  		{ id: 'kicknhat', letter: 'Z', src: 'https://s3.amazonaws.com/freecodecamp/drums/Kick_n_Hat.mp3'},
  		{ id: 'rp4kick1', letter: 'X', src: 'https://s3.amazonaws.com/freecodecamp/drums/RP4_KICK_1.mp3'},
  		{ id: 'cevh2', letter: 'C', src: 'https://s3.amazonaws.com/freecodecamp/drums/Cev_H2.mp3'},
  	];

    class App extends React.Component {
	  constructor(props) {
	    super(props);
	    this.state = {
		  display: "Play and here the audio clip will be displayed!"
		}
		  this.handleDisplay = this.handleDisplay.bind(this);
	  }
	  
	  handleDisplay(e) {
	    e.preventDefault();
	    this.setState({
		  display: "Update"
		})
	  }
	  
	  render() {
	    {/* To render the drum machine composed by display and 
		drum pads */}
	    return (
	      <div id='drum-machine'>
	        <h1 id="display">{this.state.display}</h1>
	        {data.map(d => (
	          <DrumPad
	          	id={d.id}
	          />
	        ))}
	      </div>
	      
	    );
	  }
	};
	
	class DrumPad extends React.Component {
	  constructor(props) {
	    super(props);

	    this.playAudioClip = this.playAudioClip.bind(this);
	    this.handleKeyPress = this.handleKeyPress.bind(this);
	  }

	  playAudioClip() {
        var audio = new Audio(this.props.audio);
        audio.play();
	  }
	  
	  componentDidMount() {
	    document.addEventListener('keydown', this.handleKeyPress);
	  }
	  
	  componentWillUnmount() {
	    document.removeEventListener('keydown', this.handleKeyPress);
	  }

	  handleKeyPress(e) {
        if (e.keyCode === this.props.keyCode) {
          this.playAudioClip();
        }
	  }
	  
	  playAndDisplay(e) {
		e.preventDefault();
	    this.playAudioClip();
	  }
	  
	  render() {
	    return (
	      <div 
	        className="drum-pad" 
	        id={this.props.id}
	        onClick={new Audio(this.props.audio).play()}
	        onKeyPress={this.handleKeyPress}
	       >
		      <div>{this.props.keyboard}</div>
		      <audio className="clip" src={this.props.audio} id={this.props.keyboard}>
		      </audio>
		    </div>
	    );
	  }
    };
    
    ReactDOM.render(
      <App />,
      document.getElementById('root')
    );
  </script>
  <style>
    #title {
	  font-family: 'Source Sans Pro', sans-serif;
	  font-size: 80px;
	}
	
	div {
	  font-family: 'Source Sans Prop', sans-serif;
	  font-size: 48px;
	}
  </style>
</head>
<body>

	<h1 id="title" class="text-center">Drum Machine</h1>
  <div id="root"></div>

  <!-- Load the bundle to test user stories -->
  <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>
</body>
</html>
